# Отправка сообщений

### Сервис позволяет создавать массовые рассылки сообщений по имеющимся в справочнике клиентам. Во время работы сервера каждые 5 секунд ведется отслеживание необходимых к отправке сообщений. При нахождении таких сообщений сервер автоматически отправляет запрос на внешний сервис отправки сообщений клиентам. При успешной отправке сообщения его статус меняется. Ведется журнал соозданных сообщений.

# Дополнительно
    1. Подготовлен docker-compose
    2. По адресу /docs/ открывается страница с описанием API

## Запуск<br/>
    1. Скачать репозиторий в свое окружение
    2. Запустить команду # docker-compose build
    3. Запустить команду # docker-compose up
    4. Ввести токен доступа к внешнему сервису отправки сообщений

## Функционал API

### 1. Добавления нового клиента в справочник:
POST /v1/client/create/

    json:
    {
        "phone_number": integer,
        "operator_code": string,
        "tag": string,
        "timezone": string
    }

- Код оператора должен входить в номер телефона и состоять только из цифр
- tag - произвольная метка для фильтрации рассылки

### 2. Информация обо всех клиентах
GET /v1/client/

### 3. Информация об определенном клиенте
GET /v1/client/{id}

### 4. Редактирование атрибутов клиента
PUT /v1/client/{id}/

    json:
    {
        "phone_number": integer,
        "operator_code": string,
        "tag": string,
        "timezone": string
    }

### 5. Удаление клиента из справочника
DELETE /v1/client/{id}/

### 6. Создание новой рассылки
POST /v1/mailing/create/

    json:
    {
        "start_datetime": datetime (пример: "2022-06-02T18:25:43.511Z"),
        "text": string,
        "mark": string,
        "end_datetime": datetime (пример: "2022-06-02T18:25:43.511Z"),
    }

- start_datetime и end_datetime - время начала и конца рассылки
- mark - фильтр рассылки по коду оператора или по тэгу (произвольной метке) клиентов

### 7. Информация о созданных рассылках и их сообщениях
GET /v1/mailing/

### 8. Информация о конкретной рассылке
GET /v1/mailing/{id}/

### 9. Редактирование рассылки
PUT /v1/mailing/{id}/

    json:
    {
        "start_datetime": datetime (пример: "2022-06-02T18:25:43.511Z"),
        "text": string,
        "mark": string,
        "end_datetime": datetime (пример: "2022-06-02T18:25:43.511Z"),
    }

### 10. Удаление рассылки
DELETE /v1/mailing/{id}/

# Дополнительно
    1. Подготовлен docker-compose
    2. По адресу /docs/ открывается страница с описанием API